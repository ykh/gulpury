module.exports=function(){function e(e,a,r){var p;return r.params=r.params||{},p={},p.id=e||"",p.type=a||c.COPY,p.src=r.src,p.dest=r.dest||"./dist",p.base=r.base||!1,p.params={},p.params.sass=r.params.sass||!1,p.params.rename=r.params.rename||!1,p.params.min=r.params.min||!1,p.params.gzip=r.params.gzip||!1,p.params.htmlReplace=r.params.htmlReplace||!1,p.params.replace=r.params.replace||!1,n.push(p),p}function a(e){var a;return a=[],n.forEach(function(r){r.type&&c[e.toUpperCase()]&&r.type.toLowerCase()===e.toLowerCase()&&a.push(i(r))}),m.es.merge(a)}function r(e){var a;return a=[],n.forEach(function(r){r.id&&r.id===e&&a.push(i(r))}),m.es.merge(a)}function p(e,a){n.forEach(function(r){r.type&&c[e.toUpperCase()]&&r.type.toLowerCase()===e.toLowerCase()&&t.watch(r.src,a)})}function s(e,a){n.forEach(function(r){r.id&&r.id===e&&t.watch(r.src,a)})}function i(e){var a,r;if(a={},e.base!==!1&&(a.base=e.base),r=t.src(e.src,a),e.params.sass&&(r=r.pipe(m.sass().on("error",m.sass.logError))),e.params.replace){var p;p=e.params.replace,Array.isArray(p)&&p.forEach(function(e){Array.isArray(e)&&(r=r.pipe(m.replace(e[0],e[1])))})}switch(e.params.htmlReplace&&(r=r.pipe(m.htmlReplace(e.params.htmlReplace))),e.params.rename&&(r=r.pipe(m.concat(e.params.rename)).pipe(t.dest(e.dest))),e.type){case c.COPY:r=r.pipe(t.dest(e.dest));break;case c.CSS:e.params.min&&(r=r.pipe(m.cleanCSS({compatibility:"ie8"})).pipe(m.rename(e.params.min)).pipe(t.dest(e.dest)));break;case c.JS:e.params.min&&(r=r.pipe(m.uglify()).pipe(m.rename(e.params.min)).pipe(t.dest(e.dest)))}return e.params.gzip&&(r=r.pipe(m.gzip()).pipe(t.dest(e.dest))),r}var t,c,n,m;return function(){t=require("gulp"),c={WATCH:"watch",COPY:"copy",CSS:"css",JS:"js"},n=[],m={},m.argv=require("yargs").argv,m.cleanCSS=require("gulp-clean-css"),m.concat=require("gulp-concat"),m.del=require("del"),m.es=require("event-stream"),m.uglify=require("gulp-uglify"),m.sass=require("gulp-sass"),m.rename=require("gulp-rename"),m.gzip=require("gulp-gzip"),m.runSequence=require("run-sequence"),m.htmlReplace=require("gulp-html-replace"),m.replace=require("gulp-replace")}(),{add:e,runByType:a,runById:r,watchByType:p,watchById:s,TYPES:c}}();