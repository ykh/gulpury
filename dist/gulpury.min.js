module.exports=function(){function e(e,r,a){var p;return a.params=a.params||{},p={},p.id=e||"",p.type=r||m.COPY,p.src=a.src,p.dest=a.dest||"./dist",p.base=a.base||!1,p.params={},p.params.sass=a.params.sass||!1,p.params.rename=a.params.rename||!1,p.params.min=a.params.min||!1,p.params.gzip=a.params.gzip||!1,p.params.htmlReplace=a.params.htmlReplace||!1,p.params.replace=a.params.replace||!1,p.params.sourcemaps=a.params.sourcemaps||!1,u.push(p),p}function r(e){var r;return r=[],u.forEach(function(a){a.type&&m[e.toUpperCase()]&&a.type.toLowerCase()===e.toLowerCase()&&r.push(i(a))}),t.es.merge(r)}function a(e){var r;return r=[],u.forEach(function(a){a.id&&a.id===e&&r.push(i(a))}),t.es.merge(r)}function p(e,r){u.forEach(function(a){a.type&&m[e.toUpperCase()]&&a.type.toLowerCase()===e.toLowerCase()&&c.watch(a.src,r)})}function s(e,r){u.forEach(function(a){a.id&&a.id===e&&c.watch(a.src,r)})}function i(e){var r,a;if(r={},!1!==e.base&&(r.base=e.base),a=c.src(e.src,r),e.params.sass&&(a=a.pipe(t.sass().on("error",t.sass.logError))),e.params.replace){var p;p=e.params.replace,Array.isArray(p)&&p.forEach(function(e){Array.isArray(e)&&(a=a.pipe(t.replace(e[0],e[1])))})}return e.params.htmlReplace&&(a=a.pipe(t.htmlReplace(e.params.htmlReplace))),e.params.rename&&(a=a.pipe(t.concat(e.params.rename))),e.params.sourcemaps&&(a=a.pipe(t.sourcemaps.init())),e.type===m.CSS&&e.params.min&&(a=a.pipe(t.cleanCSS({compatibility:"ie8"})).pipe(t.rename(e.params.min)).pipe(c.dest(e.dest))),e.type===m.JS&&e.params.min&&(a=a.pipe(t.uglify()).pipe(t.rename(e.params.min)).pipe(c.dest(e.dest))),e.params.gzip&&a.pipe(t.clone()).pipe(t.gzip()).pipe(c.dest(e.dest)),e.params.sourcemaps&&(a=a.pipe(t.sourcemaps.write("."))),a.pipe(c.dest(e.dest)),a}var c,m,u,t;return function(){c=require("gulp"),m={WATCH:"watch",COPY:"copy",CSS:"css",JS:"js"},u=[],t={},t.argv=require("yargs").argv,t.cleanCSS=require("gulp-clean-css"),t.concat=require("gulp-concat"),t.del=require("del"),t.es=require("event-stream"),t.uglify=require("gulp-uglify"),t.sass=require("gulp-sass"),t.rename=require("gulp-rename"),t.gzip=require("gulp-gzip"),t.runSequence=require("run-sequence"),t.htmlReplace=require("gulp-html-replace"),t.replace=require("gulp-replace"),t.sourcemaps=require("gulp-sourcemaps"),t.clone=require("gulp-clone")}(),{add:e,runByType:r,runById:a,watchByType:p,watchById:s,TYPES:m}}();