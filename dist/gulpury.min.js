module.exports=function(){function e(e,a,r){var p;return r.params=r.params||{},p={},p.id=e||"",p.type=a||m.COPY,p.src=r.src,p.dest=r.dest||"./dist",p.base=r.base||!1,p.params={},p.params.sass=r.params.sass||!1,p.params.rename=r.params.rename||!1,p.params.min=r.params.min||!1,p.params.gzip=r.params.gzip||!1,p.params.htmlReplace=r.params.htmlReplace||!1,p.params.replace=r.params.replace||!1,p.params.sourcemaps=r.params.sourcemaps||!1,t.push(p),p}function a(e){var a;return a=[],t.forEach(function(r){r.type&&m[e.toUpperCase()]&&r.type.toLowerCase()===e.toLowerCase()&&a.push(i(r))}),u.es.merge(a)}function r(e){var a;return a=[],t.forEach(function(r){r.id&&r.id===e&&a.push(i(r))}),u.es.merge(a)}function p(e,a){t.forEach(function(r){r.type&&m[e.toUpperCase()]&&r.type.toLowerCase()===e.toLowerCase()&&c.watch(r.src,a)})}function s(e,a){t.forEach(function(r){r.id&&r.id===e&&c.watch(r.src,a)})}function i(e){var a,r;if(a={},e.base!==!1&&(a.base=e.base),r=c.src(e.src,a),e.params.sass&&(r=r.pipe(u.sass().on("error",u.sass.logError))),e.params.replace){var p;p=e.params.replace,Array.isArray(p)&&p.forEach(function(e){Array.isArray(e)&&(r=r.pipe(u.replace(e[0],e[1])))})}return e.params.htmlReplace&&(r=r.pipe(u.htmlReplace(e.params.htmlReplace))),e.params.rename&&(r=r.pipe(u.concat(e.params.rename))),e.params.sourcemaps&&(r=r.pipe(u.sourcemaps.init())),e.type===m.CSS&&e.params.min&&(r=r.pipe(u.cleanCSS({compatibility:"ie8"})).pipe(u.rename(e.params.min)).pipe(c.dest(e.dest))),e.type===m.JS&&e.params.min&&(r=r.pipe(u.uglify()).pipe(u.rename(e.params.min)).pipe(c.dest(e.dest))),e.params.gzip&&r.pipe(u.gzip()).pipe(c.dest(e.dest)),e.params.sourcemaps&&(r=r.pipe(u.sourcemaps.write("."))),r.pipe(c.dest(e.dest)),r}var c,m,t,u;return function(){c=require("gulp"),m={WATCH:"watch",COPY:"copy",CSS:"css",JS:"js"},t=[],u={},u.argv=require("yargs").argv,u.cleanCSS=require("gulp-clean-css"),u.concat=require("gulp-concat"),u.del=require("del"),u.es=require("event-stream"),u.uglify=require("gulp-uglify"),u.sass=require("gulp-sass"),u.rename=require("gulp-rename"),u.gzip=require("gulp-gzip"),u.runSequence=require("run-sequence"),u.htmlReplace=require("gulp-html-replace"),u.replace=require("gulp-replace"),u.sourcemaps=require("gulp-sourcemaps")}(),{add:e,runByType:a,runById:r,watchByType:p,watchById:s,TYPES:m}}();